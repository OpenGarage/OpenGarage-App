<img align="left" height="150" src="https://github.com/OpenGarage/OpenGarage-App/blob/master/resources/icon.png?raw=true"><h3>&nbsp;OpenGarage App [![GitHub version](https://badge.fury.io/gh/OpenGarage%2FOpenGarage-App.svg)](http://badge.fury.io/gh/OpenGarage%2FOpenGarage-App)</h3>
&nbsp;[![Build Status](https://travis-ci.org/OpenGarage/OpenGarage-App.svg?branch=master)](https://travis-ci.org/OpenGarage/OpenGarage-App) [![devDependency Status](https://david-dm.org/OpenGarage/OpenGarage-App/dev-status.svg)](https://david-dm.org/OpenGarage/OpenGarage-App#info=devDependencies)
&nbsp;[Official Site][official] | [Support][help] | [Changelog][changelog]
&nbsp;&copy; 2016 [Samer Albahra][salbahra] ([@salbahra](https://twitter.com/salbahra))
<br>
Designed to allow intuitive control of the OpenGarage garage door opener.

---

[official]: https://opengarage.io
[help]: http://opengarage.io
[changelog]: https://github.com/OpenGarage/OpenGarage-App/releases
[salbahra]: http://albahra.com

<a href="https://www.opengarage.io/wp-content/uploads/2016/11/app1.png"><img src="https://www.opengarage.io/wp-content/uploads/2016/11/app1.png" width="100"/></a>
<a href="https://www.opengarage.io/wp-content/uploads/2016/11/app2.png"><img src="https://www.opengarage.io/wp-content/uploads/2016/11/app2.png" width="100"/></a>
<a href="https://www.opengarage.io/wp-content/uploads/2016/11/app3.png"><img src="https://www.opengarage.io/wp-content/uploads/2016/11/app3.png" width="100"/></a>
<a href="https://www.opengarage.io/wp-content/uploads/2016/11/app4.png"><img src="https://www.opengarage.io/wp-content/uploads/2016/11/app4.png" width="100"/></a>
<a href="https://www.opengarage.io/wp-content/uploads/2016/11/app5.png"><img src="https://www.opengarage.io/wp-content/uploads/2016/11/app5.png" width="100"/></a>

<i>Screenshots: iPhone SE</i>

---

1) Brief
------------------------------------------

The project uses Ionic/AngularJS for templating and HTML5 design. The application is bundled for native deployment using Cordova on the following platforms: iOS, Android, and OS X.

The project uses package.json as the primary repository of settings which are enforced when using the `gulp` tasks. These include the app version name and build number.

2) Folder Structure
------------------------------------------

The root directory contains configuration files for various items such as Git configuration (ignore, attributes, etc), Cordova (config.xml), parser configuration (Bower, CSSLint, editor configuration, JSCSRC, JSHint, Gulp and package.json) and this readme file.

**build** empty directory which contains the output of all built platforms using `gulp build`.

**hooks** contains hooks for Cordova when using the command line interface. These hooks will be executed when adding a new platform, for example. More details contained within the README file inside the hooks directory.

**js-src** contains the Javascript source files that will be concated and minified using Gulp/Ionic.

**resources** image assets used for packaged application such as icons and splash screens.

**scss** contains the SCSS to be compiled using Gulp/Ionic.

**www** contains the web assets to be used by the webview. This is the bulk of the web application.

3) Build Instructions
------------------------------------------

Several methods exist to live view the application for development as well as building. The following steps will install the development environment needed to run the application and build for deployment. Please note this depends on both [`git`](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git) and [`node`](https://nodejs.org/en/download/) being installed first.

```
# Clone the repository
git clone https://github.com/OpenGarage/OpenGarage-App

# Change into project directory
cd OpenGarage-App

# Install required global modules
npm install -g cordova ionic gulp

# Install required local NPM packages
npm install

# Install required Cordova platforms and plugins
ionic state restore

# Build all platforms (please note this builds a zip for PhoneGap)
gulp build
```

Below are the instructions outlined per platform:

<h3>a) Cordova ( iOS / Android / OS X )</h3>

If you are deploying for iOS on an OS X machine with X Code installed, you may run the following commands for iOS:

```
# Build/Run the app in the simulator
cordova emulate ios

# Build the application for release
gulp make-ios
```

If you have the [Android SDK](https://developer.android.com/sdk/index.html) installed with an emulator configured, you may run the app with the following command:

```
# Build/Run the app in the emulator
cordova emulate android

# Build the application for release
gulp make-android
```

> Note: The application can also be built by uploading a zip generated by the command 'gulp make-pgbuild' to build.phonegap.com. This supports certificate signing for final release as well.

If you are deploying for OS X with X Code installed, you may run the following command:

```
# Build/Run the app in the simulator
cordova run osx

# Copy icon images and build the app
gulp make-osx
```

<h3>b) Browser</h3>

```
# Full browser rendering of the application
ionic serve

# Emulated version of both iOS and Android running side by side in browser
ionic serve --lab
```

4) Gulp tasks
------------------------------------------

Outlined below are several of the gulp tasks to assist in versioning, optimization, minification, etc.

```
# Parse package.json and update version, lint and minify all source
gulp

# Listen for file changes within the source directory and update minified files
gulp watch

# Minify images
gulp images

# Bump the app version (defaults to patch increment)
gulp bump

# Bump the minor version
gulp bump --minor

# Bump the major version
gulp bump --major
```
